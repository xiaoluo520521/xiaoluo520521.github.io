{"version":3,"sources":["webpack:///./src/views/login/index.vue?1a56","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/index.vue?ad1f","webpack:///./src/utils/permission.js"],"names":["class","id","width","videoWidth","height","videoHeight","autoplay","style","faceImgState","faceVef","msg","name","data","faceOption","form","username","password","mounted","this","getCamera","thisCancas","thisContext","thisVideo","canvasId","videoId","methods","imageBase","draw","undefined","$message","error","srcObject","getTracks","stop","request","post","then","res","code","type","message","sessionStorage","setItem","JSON","stringify","$router","push","__exports__","render","activeRouter","userStr","getItem","user","parse","root","path","component","Layout","redirect","children","permissions","forEach","p","obj","router","addRoute"],"mappings":"2IAAA,W,6DCEI,eACM,OADDA,MAAM,SAAO,S,GAKbA,MAAM,a,EACT,eAGM,OAHDA,MAAM,iBAAe,CACxB,eAAmC,OAA9BA,MAAM,oBACX,eAAoC,OAA/BA,MAAM,uB,MAERA,MAAM,iB,GAGJA,MAAM,4B,mDAegBA,MAAM,0B,SACnBA,MAAM,wB,GAKfA,MAAM,Y,GAKNA,MAAM,O,GACJA,MAAM,c,EACX,eAAsD,OAAjDA,MAAM,WAAU,+BAA2B,G,EAIpD,eAGM,OAHDA,MAAM,iBAAe,CACxB,eAAmC,OAA9BA,MAAM,oBACX,eAAoC,OAA/BA,MAAM,uB,mDAhDjB,eAqDM,YApDJ,EAKA,eA4CM,MA5CN,EA4CM,CA3CJ,EAIA,eAkCM,MAlCN,EAkCM,CA/BJ,eAkBM,MAlBN,EAkBM,CAjBJ,eAKS,SAJLC,GAAG,cACFC,MAAO,EAAAC,WACPC,OAAQ,EAAAC,YACTC,SAAA,I,UAEJ,eAKU,UAJNC,MAAA,iBACAN,GAAG,eACFC,MAAO,EAAAC,WACPC,OAAQ,EAAAC,a,UAIF,EAAAG,c,iBAAX,eAA8D,MAA9D,K,iBACA,eAA+C,MAA/C,MAKF,eAEM,MAFN,EAEM,CADJ,eAAsE,UAA7D,QAAK,+BAAE,EAAAC,a,eAAa,EAAAD,aAAY,wBAI3C,eAGM,MAHN,EAGM,CAFJ,eAAqC,MAArC,EAAqC,eAAX,EAAAE,KAAG,GAC7B,MAIJ,M,wCAcS,GACbC,KAAM,YACNC,KAFa,WAGX,MAAO,CACLT,WAAY,IACZE,YAAa,IACbK,IAAI,GACJF,cAAa,EACbK,WAAW,GACXC,KAAK,CAACC,SAAS,QAAQC,SAAS,WAGpCC,QAZa,WAcXC,KAAKL,WAAa,OAAQM,UAAU,CAClChB,WAAY,IACZE,YAAa,IACbe,WAAY,KACZC,YAAa,KACbC,UAAW,KACXC,SAAS,eACTC,QAAQ,iBAKZC,QAAS,CAEPhB,QAFO,WAEE,WAEHiB,EAAY,OAAQC,KAAKT,KAAKL,YAC9BK,KAAKV,eAGTU,KAAKV,cAAe,EACF,KAAdkB,GAAkC,OAAdA,QAAoCE,IAAdF,EAC5CR,KAAKW,SAASC,MAAM,WAEpBZ,KAAKL,WAAWS,UAAUS,UAAUC,YAAY,GAAGC,OACnDC,EAAA,KAAQC,KAAK,cAAejB,KAAKJ,MAAMsB,MAAK,SAAAC,GACzB,MAAbA,EAAIC,MACN,EAAKT,SAAS,CACZU,KAAM,UACNC,QAAS,SAEXC,eAAeC,QAAQ,OAAQC,KAAKC,UAAUP,EAAIzB,OAGlD,iBACiB,IAAdyB,EAAIzB,KAAKX,GACV,EAAK4C,QAAQC,KAAK,KAIlB,EAAKD,QAAQC,KAAK,WAKpB,EAAKjB,SAAS,CACZU,KAAM,QACNC,QAASH,EAAI3B,c,iCCnH3B,MAAMqC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,4JCHR,SAASC,IACZ,IAAMC,EAAUT,eAAeU,QAAQ,QACvC,GAAID,EAAS,CACT,IAAME,EAAOT,KAAKU,MAAMH,GACpBI,EAAO,CACPC,KAAM,IACN5C,KAAM,SACN6C,UAAWC,OACXC,SAAU,QACVC,SAAU,IAGdP,EAAKQ,YAAYC,SAAQ,SAAAC,GACrB,IAAIC,EAAM,CACNR,KAAMO,EAAEP,KACR5C,KAAMmD,EAAEnD,KACR6C,UAAW,kBAAM,UAAO,KAAaM,EAAEnD,QAG3C2C,EAAKK,SAASb,KAAKiB,MAGnBC,QACAA,OAAOC,SAASX","file":"js/chunk-d3c3d992.82b2acd2.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=6e21d3e4&lang=css\"","<template>\n  <div>\n    <div class=\"login\">\n    </div>\n\n\n    <!--登录中间块-->\n    <div class=\"login-mid\">\n      <div class=\"login-mid-top\">\n        <div class=\"shadow-top-left\"></div>\n        <div class=\"shadow-top-right\"></div>\n      </div>\n      <div class=\"login-mid-mid\">\n\n        <!--捕获人脸区域-->\n        <div class=\"videoCamera-canvasCamera\">\n          <video\n              id=\"videoCamera\"\n              :width=\"videoWidth\"\n              :height=\"videoHeight\"\n              autoplay\n          ></video>\n          <canvas\n              style=\"display: none\"\n              id=\"canvasCamera\"\n              :width=\"videoWidth\"\n              :height=\"videoHeight\"\n          ></canvas>\n\n          <!--人脸特效区域-->\n          <div v-if=\"faceImgState\" class=\"face-special-effects-2\"></div>\n          <div v-else class=\"face-special-effects\"></div>\n\n        </div>\n\n        <!--按钮区域-->\n        <div class=\"face-btn\">\n          <button @click=\"faceVef()\">{{faceImgState?'正在识别中...':'开始识别'}}</button>\n        </div>\n\n        <!--消息区域-->\n        <div class=\"msg\">\n          <div class=\"server-msg\">{{msg}}</div>\n          <div class=\"welcome\">Welcome to face recognition</div>\n        </div>\n\n      </div>\n      <div class=\"login-mid-bot\">\n        <div class=\"shadow-bot-left\"></div>\n        <div class=\"shadow-bot-right\"></div>\n      </div>\n    </div>\n\n\n  </div>\n\n</template>\n<script>\nimport $camera from '../../camera/index.js'\nimport request from \"@/utils/request\";\nimport {activeRouter} from \"@/utils/permission\";\nexport default {\n  name: \"Facelogin\",\n  data() {\n    return {\n      videoWidth: 200,\n      videoHeight: 200,\n      msg:'',\n      faceImgState:false,\n      faceOption:{},\n      form:{username:\"admin\",password:\"admin\"}\n    };\n  },\n  mounted() {\n    //调用摄像头\n    this.faceOption = $camera.getCamera({\n      videoWidth: 200,\n      videoHeight: 200,\n      thisCancas: null,\n      thisContext: null,\n      thisVideo: null,\n      canvasId:'canvasCamera',\n      videoId:'videoCamera'\n    });\n\n    //this.getCompetence();\n  },\n  methods: {\n    // 调用后台接口\n    faceVef(){\n      // 开始绘制图片\n      let imageBase = $camera.draw(this.faceOption)\n      if (this.faceImgState){\n        return\n      }\n      this.faceImgState = true\n      if (imageBase === '' || imageBase === null || imageBase === undefined){\n        this.$message.error(\"图片数据为空\")\n      }else {\n        this.faceOption.thisVideo.srcObject.getTracks()[0].stop();\n        request.post(\"/user/login\", this.form).then(res => {\n          if (res.code === '0') {\n            this.$message({\n              type: \"success\",\n              message: \"登录成功\"\n            })\n            sessionStorage.setItem(\"user\", JSON.stringify(res.data))  // 缓存用户信息\n\n            // 登录成功的时候更新当前路由\n            activeRouter()\n            if(res.data.id===1) {\n              this.$router.push(\"/\")//登录成功之后进行页面的跳转，跳转到主页\n            }\n\n            else{\n              this.$router.push(\"/front\")\n            }\n\n\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            })\n          }\n        })\n\n      }\n    }\n  },\n};\n</script>\n<style>\n@import \"./index.css\";\n</style>","import { render } from \"./index.vue?vue&type=template&id=6e21d3e4\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=6e21d3e4&lang=css\"\n\nimport exportComponent from \"D:\\\\BaiduNetdiskDownload\\\\springboot-vue-demo-master\\\\vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import router from \"@/router\";\nimport Layout from \"@/layout/Layout\";\nimport Front from \"@/layout/Front\";\n\n// 注意：这个文件是设置动态路由的\n// permissions是一个资源的数组\nexport function activeRouter() {\n    const userStr = sessionStorage.getItem(\"user\")\n    if (userStr) {\n        const user = JSON.parse(userStr)\n        let root = {\n            path: '/',\n            name: 'Layout',\n            component: Layout,\n            redirect: \"/home\",\n            children: []\n        }\n\n        user.permissions.forEach(p => {\n            let obj = {\n                path: p.path,\n                name: p.name,\n                component: () => import(\"@/views/\" + p.name)\n            };\n\n            root.children.push(obj)\n\n        })\n        if (router) {\n            router.addRoute(root)\n\n\n        }\n    }\n}\n\n\n"],"sourceRoot":""}